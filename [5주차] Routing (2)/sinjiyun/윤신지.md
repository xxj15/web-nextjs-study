_\* Mash-UP 15ê¸° ì›¹ íŒ€ ë‚´ [Next.js ìŠ¤í„°ë””](https://github.com/mash-up-kr/web-nextjs-study)ì—ì„œ ì§„í–‰ëœ ë‚´ìš©ìœ¼ë¡œ, ê³µì‹ ë¬¸ì„œì™€ ê³µí†µëœ ìë£Œë¥¼ ì½ê³  ì •ë¦¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤._
_\*\* ì •ë¦¬í•˜ë‹¤ ê¶ê¸ˆí•œ ë‚´ìš©(ê¶ê¸ˆí•œ ë‚´ìš©ì´ ì•„ë‹ˆë”ë¼ë„ ìŠ¤í„°ë”” ì‹œê°„ì— ì–˜ê¸°í•˜ê³  ì‹¶ì€)ì€ â“ ì´ëª¨ì§€ë¡œ ì •ë¦¬í•´ ë‘ì—ˆìŠµë‹ˆë‹¤._

> **5ì£¼ì°¨ ìë£Œ**</br>[Dynamic Routes](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes) </br>[Parallel Routes](https://nextjs.org/docs/app/building-your-application/routing/parallel-routes) </br> [Intercepting Routes](https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes)

---

# âœ¨ Dynamic Routes

ì •í™•í•œ ì„¸ê·¸ë¨¼íŠ¸ ì´ë¦„ì„ ë¯¸ë¦¬ ì•Œì§€ ëª»í•˜ê³  ë™ì  ë°ì´í„°ì—ì„œ ê²½ë¡œë¥¼ ìƒì„±í•˜ë ¤ëŠ” ê²½ìš°, ìš”ì²­ ì‹œ ì±„ì›Œì§€ê±°ë‚˜ í”„ë¦¬ë Œë”ë§ëœ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## ğŸ’« Convention

- ë™ì  ì„¸ê·¸ë¨¼íŠ¸ëŠ” í´ë” ì´ë¦„ì„ ëŒ€ê´„í˜¸ë¡œ ê°ì‹¸ì„œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. -> `[folederName]`
- ë™ì  ì„¸ê·¸ë¨¼íŠ¸ëŠ” `params` propìœ¼ë¡œ `layout`, `page`, `route`, ë° `generateMetadata` í•¨ìˆ˜ì— ì „ë‹¬ëœë‹¤.

</br>

## ğŸ’« Example

```typescript
export default async function Page({
  params,
}: {
  params: Promise<{ slug: string }>;
}) {
  const { slug } = await params;
  return <div>My Post: {slug}</div>;
}
```

ìœ„ì™€ ê°™ì€ ì½”ë“œê°€ ìˆì„ ê²½ìš°, ì˜ˆì‹œ urlì´ `blog/a`ì¸ ê²½ìš°ì— paramsëŠ” `{ slug: 'a' }`ì´ë‹¤.

</br>

## ğŸ’« ì•Œì•„ë‘ë©´ ì¢‹ì€ ì 

- `params` propëŠ” promiseì´ë‹¤. ê°’ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ async/await ë˜ëŠ” Reactì˜ use í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- page ë””ë ‰í† ë¦¬ì—ì„œ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ëŠ” ë™ì  ê²½ë¡œì™€ ë™ì¼í•˜ë‹¤.
  - App Routerì—ì„œì˜ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ëŠ” ê¸°ì¡´ Pages Routerì—ì„œì˜ ë™ì  ê²½ë¡œì™€ ì •ì˜ ë°©ì‹ê³¼ ê¸°ëŠ¥ì´ ë™ì¼í•˜ë‹¤.

## ğŸ’« ì •ì  ë§¤ê°œë³€ìˆ˜ ìƒì„±

`generateStaticParams` í•¨ìˆ˜ëŠ” ë™ì  ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸ì™€ ê²°í•©í•˜ì—¬ ë¹Œë“œ ì‹œê°„ì— ìš”ì²­ ì‹œê°„ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ëŒ€ì‹  ì •ì ìœ¼ë¡œ ìƒì„±ëœ ê²½ë¡œë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ğŸ‘‰ ìš”ì²­ ì‹œê°„ì— ìƒì„±í•˜ëŠ” ëŒ€ì‹  ë¹Œë“œ ì‹œê°„ì— ì •ì ìœ¼ë¡œ ìƒì„±ëœ ê²½ë¡œë¥¼ ë§Œë“œëŠ”ë° ì‚¬ìš©ëœë‹¤. ì¦‰, ì‚¬ìš©ìê°€ ì ‘ì†í•  ë•Œê°€ ì•„ë‹Œ ë°°í¬í•  ë•Œ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘”ë‹¤.

```typescript
export async function generateStaticParams() {
  const posts = await fetch("https://.../posts").then((res) => res.json());

  return posts.map((post) => ({
    slug: post.slug,
  }));
}
```

`generateStaticParams` í•¨ìˆ˜ ë‚´ì—ì„œ `fetch` ìš”ì²­ì„ ì‚¬ìš©í•˜ì—¬ ì½˜í…ì¸ ë¥¼ ê²€ìƒ‰í•˜ë©´ ìš”ì²­ì´ ìë™ìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜ ëœë‹¤.

ğŸ‘‰ ì—¬ëŸ¬ `generateStaticParams`, ë ˆì´ì•„ì›ƒ ë° í˜ì´ì§€ì—ì„œ ë™ì¼í•œ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” `fetch` ìš”ì²­ì€ í•œ ë²ˆë§Œ ìˆ˜í–‰ë˜ì–´ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•í•œë‹¤.

</br>

## ğŸ’« Catch-all Segments

ë™ì  ì„¸ê·¸ë¨¼íŠ¸ëŠ” ëŒ€ê´„í˜¸ ì•ˆì— ì¤„ì„í‘œë¥¼ ì¶”ê°€í•˜ì—¬ ëª¨ë“  í›„ì† ì„¸ê·¸ë¨¼íŠ¸ë¥¼ í¬ê´„í•˜ë„ë¡ í™•ì¥í•  ìˆ˜ ìˆë‹¤.

> `app/shop/[...slug]/page.js`ëŠ” `/shop/clothes`ì™€ ì¼ì¹˜í•˜ì§€ë§Œ `/shop/clothes/tops`, `/shop/clothes/tops/t-shirts` ë“±ê³¼ë„ ì¼ì¹˜í•˜ë‹¤.
> </br> ğŸ‘‰ ì´ ê²½ìš°ì— paramsëŠ” `{ slug : ['clothes', 'tops', 't-shirts']}`ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.

</br>

## ğŸ’« Optional Catch-all Segments

Catch-all SegmentsëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ì¤‘ ëŒ€ê´„í˜¸ë¡œë¡œ í¬í•¨ì‹œì¼œ ì„ íƒì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

catch-all ê³¼ option catch-allì˜ ê°€ì¥ í° ì°¨ì´ì ì€ optionalì˜ ê²½ìš° ë§¤ê°œë³€ìˆ˜ ì—†ì´ë„ ê²½ë¡œê°€ ì¼ì¹˜í•œë‹¤ëŠ” ì ì´ë‹¤. í•˜ìœ„ê°€ ì—†ê±°ë‚˜ ê¸°ë³¸ urlë„ ëŒ€ì‘ì´ ê°€ëŠ¥í•˜ë‹¤.

ğŸ‘‰`ì¦‰, ì¼ë°˜ catch-allê³¼ëŠ” ë‹¬ë¦¬`/shop` ê²½ë¡œë„ ë§¤ì¹­ ê°€ëŠ¥í•˜ë‹¤.

## ğŸ’« TypeScript

TypeScriptë¥¼ ì‚¬ìš©í•  ë•Œ, êµ¬ì„±ëœ ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸ì— ë”°ë¼ `params`ì— ëŒ€í•œ íƒ€ì…ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

> - `app/blog/[slug]/page.js` ğŸ‘‰ `{ slug: string }`
> - `app/shop/[...slug]/page.js` ğŸ‘‰ `{ slug: string[] }`
> - `app/shop/[[...slug]]/page.js` ğŸ‘‰ `{ slug?: string[] }`
> - `app/[categoryId]/[itemId]/page.js` ğŸ‘‰ `{ categoryId: string, itemId: string }`

</br>

---

# âœ¨ Parallel Routes

Parallel Routesë¥¼ ì‚¬ìš©í•˜ë©´ ë™ì¼í•œ ë ˆì´ì•„ì›ƒ ë‚´ì—ì„œ í•˜ë‚˜ ì´ìƒì˜ í˜ì´ì§€ë¥¼ ë™ì‹œì— ë˜ëŠ” ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆê²Œ í•´ ì¤€ë‹¤. ì´ëŠ” ì†Œì…œ ì‚¬ì´íŠ¸ì˜ ëŒ€ì‹œë³´ë“œ ë° í”¼ë“œì™€ ê°™ì€ ë™ì ì¸ ì•± ì„¹ì…˜ì— ìœ ìš©í•˜ë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes.png&w=3840&q=75)

## ğŸ’« Slot

Parallel RoutesëŠ” slotsë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìƒì„±ëœë‹¤. SlotsëŠ” @folder ê·œì¹™ìœ¼ë¡œ ì •ì˜ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ ì´ë¯¸ì§€ì˜ íŒŒì¼ êµ¬ì¡°ëŠ” ë‘ ê°œì˜ slotsì¸ @analyticsì™€ @teamì„ ì •ì˜í•œë‹¤.
![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-file-system.png&w=3840&q=75)

SlotsëŠ” ê³µìœ ëœ ë¶€ëª¨ ë ˆì´ì•„ì›ƒì— propsë¡œ ì „ë‹¬ëœë‹¤. ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ” app/layout.jsì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì´ì œ @analytics ë° @team slots propsë¥¼ ë°›ì•„ë“¤ì´ê³ , children propê³¼ í•¨ê»˜ ë³‘ë ¬ë¡œ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

```typescript
export default function Layout({
  children,
  team,
  analytics,
}: {
  children: React.ReactNode;
  analytics: React.ReactNode;
  team: React.ReactNode;
}) {
  return (
    <>
      {children}
      {team}
      {analytics}
    </>
  );
}
```

```typescript
// ì œ ì½”ë“œë„ ì‡½ìƒ¥ ê°€ì ¸ì™€ì„œ ìë‘í•´ë³´ì•˜ì–´ìš”...

import { ReactNode } from "react";

type Props = {
  image: ReactNode;
  content: ReactNode;
};

export default function AuthLayout({ content, image }: Props) {
  return (
    <div className="flex min-h-screen">
      <div className="flex w-1/2 items-center justify-center">{content}</div>

      <div className="relative w-1/2">{image}</div>
    </div>
  );
}
```

ìŠ¬ë¡¯ì€ ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸ê°€ ì•„ë‹ˆë©° URL êµ¬ì¡°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

ìŠ¬ë¡¯ì€ ì¼ë°˜ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì™€ ê²°í•©ë˜ì–´ ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸ì™€ ì—°ê²°ëœ ìµœì¢… í˜ì´ì§€ë¥¼ í˜•ì„±í•œë‹¤.
ğŸ‘‰ ë™ì¼í•œ ê²½ë¡œ ì„¸ê·¸ë¨¼íŠ¸ ë ˆë²¨ì—ì„œ ë³„ë„ì˜ ì •ì  ìŠ¬ë¡¯ê³¼ ë™ì  ìŠ¬ë¡¯ì„ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.

ex. `/dashboard/@main/page.tsx` / `/dashboard/@modal/[id]/page.tsx` ì²˜ëŸ¼ í•˜ë‚˜ë§Œ ì •ì ì´ê³  í•˜ë‚˜ë§Œ ë™ì ì¼ ìˆ˜ ì—†ìœ¼ë©°, ë‘˜ ë‹¤ ë™ì ì´ê±°ë‚˜ ë‘˜ ë‹¤ ì •ì ì´ì–´ì•¼ í•œë‹¤.

> ë”± ì¼ì£¼ì¼ ì „ ì¯¤ slot ì²˜ìŒ ì‚¬ìš©í•´ë´¤ëŠ”ë° ë„ˆë¬´ ë°˜ê°€ì› ë‹¤!!!!

</br>

## ğŸ’« Active state and navigation

ê¸°ë³¸ì ìœ¼ë¡œ, NextJSëŠ” ê° ìŠ¬ë¡¯ì— ëŒ€í•´ active stateë¥¼ ì¶”ì í•˜ì§€ë§Œ ìŠ¬ë¡¯ ë‚´ì—ì„œ ë Œë”ë§ëœ ì½˜í…ì¸ ëŠ” íƒìƒ‰ ìœ í˜•ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.

- Soft Navigation : í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ ì¤‘ì— Next.jsëŠ” ë¶€ë¶„ ë Œë”ë§ì„ ìˆ˜í–‰í•˜ì—¬ í˜„ì¬ URLê³¼ ì¼ì¹˜í•˜ì§€ ì•Šë”ë¼ë„ ë‹¤ë¥¸ slotì˜ í™œì„± í•˜ìœ„ í˜ì´ì§€ë¥¼ ìœ ì§€í•˜ë©´ì„œ slot ë‚´ì˜ í•˜ìœ„ í˜ì´ì§€ë¥¼ ë³€ê²½í•œë‹¤.
- Hard Navigation : ì „ì²´ í˜ì´ì§€ ë¡œë“œ(ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨) í›„ Next.jsëŠ” í˜„ì¬ URLê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” slotsì˜ í™œì„± ìƒíƒœë¥¼ ê²°ì •í•  ìˆ˜ ì—†ë‹¤. ëŒ€ì‹ , ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” slotsì— ëŒ€í•´ `default.tsx` íŒŒì¼ì„ ë Œë”ë§í•˜ê±°ë‚˜, default.jsê°€ ì—†ìœ¼ë©´ `404`ë¥¼ ë Œë”ë§í•œë‹¤.

ğŸ‘‰ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ í˜„ì¬ URLê³¼ ì§ì ‘ì ìœ¼ë¡œ ê´€ë ¨ì´ ì—†ëŠ” ìŠ¬ë¡¯ì€ ì–´ë–¤ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤˜ì•¼ í• ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— í•´ë‹¹ ìŠ¬ë¡¯ì— `default.tsx`ê°€ ìˆìœ¼ë©´ í•´ë‹¹ íŒŒì¼ì„ ë³´ì—¬ì¤€ë‹¤.

ğŸ‘‰ ì¦‰, ë‘ ê°œì˜ ì°¨ì´ëŠ” ë¶€ë¶„ ë Œë”ë§ê³¼ ì „ì²´ ì¬ë Œë”ë§ìœ¼ë¡œ, ìŠ¬ë¡¯ì„ ìœ ì§€í•˜ëƒ ì´ˆê¸°í™”í•˜ëƒì˜ ì°¨ì´ì ì´ ìˆë‹¤! íŠ¹íˆ Hard Navigationì˜ ê²½ìš° ì „ì²´ ì¬ë Œë”ë§ìœ¼ë¡œ ì¸í•´ ìŠ¬ë¡¯ì´ ìœ ì§€ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ `default.tsx`ê°€ í•„ìš”í•˜ë‹¤!!

### default.js

ì´ˆê¸° ë¡œë“œ ë˜ëŠ” ì „ì²´ í˜ì´ì§€ ìƒˆë¡œ ê³ ì¹¨ ì¤‘ì— ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ìŠ¬ë¡¯ì— ëŒ€í•œ ëŒ€ì²´ë¡œ ë Œë”ë§í•  `default.tsx` íŒŒì¼ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-unmatched-routes.png&w=1920&q=75)
ìœ„ ì´ë¯¸ì§€ë¥¼ ë³´ë©´, `@team` ìŠ¬ë¡¯ì—ëŠ” `/settings` í˜ì´ì§€ê°€ ìˆì§€ë§Œ `@analytics` ìŠ¬ë¡¯ì—ëŠ” ì—†ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

`/settings` í˜ì´ì§€ë¡œ ì´ë™í•  ë•Œ, `@team` ìŠ¬ë¡¯ì€ `/settings` í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ë©´ì„œ `@analytics` ìŠ¬ë¡¯ì˜ í˜„ì¬ í™œì„± í˜ì´ì§€ë¥¼ ìœ ì§€í•œë‹¤.
ë§Œì•½ ìƒˆë¡œ ê³ ì¹¨ì„ í•  ê²½ìš°, ìœ ì§€í•  í™œì„± í˜ì´ì§€ê°€ ì—†ê¸° ë•Œë¬¸ì— `@analytics`ì— ëŒ€í•´ `default.js`ë¥¼ ë Œë”ë§í•œë‹¤.

ğŸ‘‰ ì¶”ê°€ë¡œ `children`ì€ ì•”ë¬µì  ìŠ¬ë¡¯ì´ë¯€ë¡œ Next.jsê°€ ë¶€ëª¨ í˜ì´ì§€ì˜ í™œì„± ìƒíƒœë¥¼ ë³µêµ¬í•  ìˆ˜ ì—†ì„ ë•Œ `children`ì— ëŒ€í•œ ëŒ€ì²´ ë Œë”ë§ì„ ìœ„í•´ `default.js` íŒŒì¼ì„ ìƒì„±í•´ì•¼ í•œë‹¤.

### useSelectedLayoutSegment(s)

`useSelectedLayoutSegment` ë° `useSelectedLayoutSegments`ëŠ” `parallelRoutesKey` ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ slot ë‚´ì˜ í™œì„± ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆê²Œ í•œë‹¤.

```typescript
"use client";

import { useSelectedLayoutSegment } from "next/navigation";

export default function Layout({ auth }: { auth: React.ReactNode }) {
  const loginSegment = useSelectedLayoutSegment("auth");
  // ...
}
```

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ `@auth` ìŠ¬ë¡¯ì—ì„œ ì–´ë–¤ ê²½ë¡œê°€ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.

ë§Œì•½ ì‚¬ìš©ìê°€ `app/@auth/login`ìœ¼ë¡œ ì´ë™í•  ë•Œ, `loginSegment`ëŠ” ë¬¸ìì—´ `login`ì´ ë  ê²ƒì´ë‹¤. ë§Œì•½ ì•„ë¬´ê²ƒë„ ì—†ìœ¼ë©´ `null`ì„ ë°˜í™˜í•œë‹¤.

</br>

## ğŸ’« Examples

### Conditional Routes(ì¡°ê±´ë¶€ ê²½ë¡œ)

ì‚¬ìš©ì ì—­í• ê³¼ ê°™ì€ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ì¡°ê±´ë¶€ë¡œ ê²½ë¡œë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ Parallel Routesë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fconditional-routes-ui.png&w=1920&q=75)
ìœ„ì™€ ê°™ì´ `/user`ë‚˜ `/admin`ì— ë”°ë¼ ë‹¤ë¥¸ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

```typescript
import { checkUserRole } from "@/lib/auth";

export default function Layout({
  user,
  admin,
}: {
  user: React.ReactNode;
  admin: React.ReactNode;
}) {
  const role = checkUserRole();
  // ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ í˜ì´ì§€ ë Œë”ë§
  return role === "admin" ? admin : user;
}
```

### Tap Groups

ìŠ¬ë¡¯ ì•ˆì— `layout`ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ ìŠ¬ë¡¯ì„ ë…ë¦½ì ìœ¼ë¡œ íƒìƒ‰í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-tab-groups.png&w=1920&q=75)
ìœ„ ì´ë¯¸ì§€ë¥¼ ë³´ë©´, `@analytics` ìŠ¬ë¡¯ì—ëŠ” `/page-views`ì™€ `/visitors`ì˜ ë‘ ê°œì˜ í•˜ìœ„ í˜ì´ì§€ê°€ ìˆë‹¤. ì´ë•Œ, `@analytics` ë‚´ì—ì„œ `layout` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë‘ í˜ì´ì§€ ê°„ì˜ íƒ­ì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

```typescript
import Link from "next/link";

export default function Layout({ children }: { children: React.ReactNode }) {
  return (
    <>
      <nav>
        <Link href="/page-views">Page Views</Link>
        <Link href="/visitors">Visitors</Link>
      </nav>
      <div>{children}</div>
    </>
  );
}
```

ğŸ‘‰ ìœ„ì™€ ê°™ì´ tap groupsë¥¼ ì´ìš©í•˜ë©´, íƒ­ì„ í´ë¦­í•˜ë©´ ê°ê°ì˜ ë¼ìš°íŠ¸ë¥¼ ë³´ì—¬ì£¼ì§€ë§Œ ì „ì²´ ë ˆì´ì•„ì›ƒì€ ìœ ì§€ë˜ë¯€ë¡œ í˜ì´ì§€ ì „ì²´ë¥¼ ë¦¬ë¡œë“œí•˜ì§€ ì•Šê³  URLë§Œ ë°”ê¾¸ë©° íƒ­ ê°„ì— ì´ë™í•  ìˆ˜ ìˆë‹¤.

### Modals

Parallel RoutesëŠ” Intercepting Routesì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ë”¥ ë§í¬ë¥¼ ì§€ì›í•˜ëŠ” ëª¨ë‹¬ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´

ğŸ‘‰ ëª¨ë‹¬ ì½˜í…ì¸ ë¥¼ URLì„ í†µí•´ ê³µìœ  ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
</br>
ğŸ‘‰ í˜ì´ì§€ê°€ ìƒˆë¡œ ê³ ì³ì§ˆ ë•Œ ëª¨ë‹¬ì„ ë‹«ëŠ” ëŒ€ì‹  ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ì—¬ ëª¨ë‹¬ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
</br>
ğŸ‘‰ ë’¤ë¡œ ê°€ê¸° ì‹œ ëª¨ë‹¬ì„ ë‹«ê³ , ì•ìœ¼ë¡œ ë‹¤ì‹œ ì˜¬ ë•Œ ëª¨ë‹¬ì„ ë‹¤ì‹œ ì—´ ìˆ˜ ìˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-auth-modal.png&w=1920&q=75)

> ì‚¬ìš©ìê°€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ì„ í†µí•´ ë ˆì´ì•„ì›ƒì—ì„œ ë¡œê·¸ì¸ ëª¨ë‹¬ì„ ì—´ê±°ë‚˜ ë³„ë„ì˜ `/login` í˜ì´ì§€ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ ë³´ì. (ìœ„ ì´ë¯¸ì§€ ì°¸ê³ )

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-modal-login-page.png&w=1920&q=75)
ìœ„ì™€ ê°™ì´ ê¸°ë³¸ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” '/login` ë¼ìš°íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ì•¼ í•œë‹¤.

ê·¸ëŸ° ë‹¤ìŒ, `@auth` ìŠ¬ë¡¯ ì•ˆì— `default.js` íŒŒì¼ì„ ì¶”ê°€í•˜ì—¬ `null`ì„ ë°˜í™˜í•œë‹¤. ğŸ‘‰ ëª¨ë‹¬ì´ í™œì„±í™”ë˜ì§€ ì•Šì•˜ì„ ë•Œ ë Œë”ë§ë˜ì§€ ì•Šë„ë¡ ë³´ì¥ëœë‹¤.

ì´í›„ `@auth` ìŠ¬ë¡¯ ì•ˆì—ì„œ `/login` ê°€ë¡œì±„ê³  `/(.)login` í´ë”ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤. ì´ëŠ” `/(.)login/page.tsx` íŒŒì¼ì— `<Modal>` ì»´í¬ë„ŒíŠ¸ì™€ ìì‹ë“¤ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ë‹¤.

```typescript
// app/login/page.tsx
import { Login } from "@/app/ui/login";

export default function Page() {
  return <Login />;
}
```

```typescript
// app/@auth/default.tsx
export default function Default() {
  return null;
}
```

```typescript
// app/@auth/(.)login/page.tsx

import { Modal } from "@/app/ui/modal";
import { Login } from "@/app/ui/login";

export default function Page() {
  return (
    <Modal>
      <Login />
    </Modal>
  );
}
```

</br>

#### ëª¨ë‹¬ ì—´ê¸°

ì´ì œ NextJS ë¼ìš°í„°ë¥¼ í™œìš©í•˜ì—¬ ëª¨ë‹¬ì„ ì—´ê³  ë‹«ì„ ìˆ˜ ìˆë‹¤. ì•ìœ¼ë¡œ ì„¤ëª…ë  ë°©ì‹ì„ ì´ìš©í•˜ë©´ ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ URLì´ ì˜¬ë°”ë¥´ê²Œ ì—…ë°ì´íŠ¸ ë˜ê³ , í˜ì´ì§€ë¥¼ ì•ë’¤ë¡œ ì´ë™í•  ë•Œë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.

ëª¨ë‹¬ì„ ì—´ë ¤ë©´ `@auth` ìŠ¬ë¡¯ì„ ë¶€ëª¨ ë ˆì´ì•„ì›ƒì— prop ìœ¼ë¡œ ì „ë‹¬í•˜ê³  `children` propì™€ í•¨ê»˜ ë Œë”ë§í•´ì•¼ í•œë‹¤.

```typescript
import Link from "next/link";

export default function Layout({
  auth,
  children,
}: {
  auth: React.ReactNode;
  children: React.ReactNode;
}) {
  return (
    <>
      <nav>
        <Link href="/login">Open modal</Link>
      </nav>
      // ëª¨ë‹¬ì„ ë Œë”ë§í•  ìë¦¬
      <div>{auth}</div>
      <div>{children}</div>
    </>
  );
}
```

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ ì‚¬ìš©ìê°€ `<Link>`ë¥¼ í´ë¦­í•˜ë©´ ëª¨ë‹¬ì´ ì—´ë¦¬ê³ , `login` í˜ì´ì§€ë¡œ ì´ë™í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜ **ìƒˆë¡œ ê³ ì¹¨í•˜ê±°ë‚˜ ì´ˆê¸° ë¡œë“œ ì‹œ `/login`ìœ¼ë¡œ ì´ë™í•˜ë©´ ì‚¬ìš©ìê°€ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤.**

#### ëª¨ë‹¬ ë‹«ê¸°

ëª¨ë‹¬ì€ `router.back()`ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ `Link` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹«ì„ ìˆ˜ ìˆë‹¤.

```typescript
"use client";

import { useRouter } from "next/navigation";

export function Modal({ children }: { children: React.ReactNode }) {
  const router = useRouter();

  return (
    <>
      <button
        onClick={() => {
          router.back();
        }}
      >
        Close modal
      </button>
      <div>{children}</div>
    </>
  );
}
```

í˜ì´ì§€ì—ì„œ ë” ì´ìƒ `@auth` ìŠ¬ë¡¯ì„ ë Œë”ë§í•˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ê²½ìš° `Link` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í‰í–‰ ë¼ìš°íŠ¸ê°€ `null`ì„ ë°˜í™˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì™€ ì¼ì¹˜í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.
ğŸ‘‰ ëª¨ë‹¬ì´ ë”ì´ìƒ ë³´ì—¬ì§€ë©´ ì•ˆ ë˜ëŠ” ê²½ë¡œì¼ ë•Œ ëª¨ë‹¬ ìŠ¬ë¡¯ì— ì•„ë¬´ê²ƒë„ ì•ˆ ë³´ì´ë„ë¡ ì§€ì •í•´ì•¼ í•œë‹¤.

```typescript
export default function Page() {
  return null;
}
```

ë˜í•œ ëª¨ë‹¬ì´ ì•ˆ ë– ì•¼ í•  ëª¨ë“  ê²½ë¡œë§ˆë‹¤ ì¼ì¼ì´ ëŒ€ì‘í•˜ê¸°ëŠ” ë„ˆë¬´ ë²ˆê±°ë¡œìš°ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ catch-allì„ ì´ìš©í•˜ì—¬ ëª¨ë‹¬ì´ ë– ì•¼ í•  ê²½ë¡œê°€ ì•„ë‹Œ ë‚˜ë¨¸ì§€ ê²½ë¡œë“¤ì— ìë™ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ @auth/
â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”œâ”€â”€ [...catchAll]/
â”‚   â”‚   â””â”€â”€ page.tsx

```

```typescript
export default function CatchAll() {
  return null;
}
```

ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ loginì— ì§„ì…í–ˆì„ ë•Œë¥¼ ì œì™¸í•˜ê³  ëª¨ë‘ ëª¨ë‹¬ì„ ë‹«ì€ ìƒíƒœë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

</br>

### Loading and Error UI

Parallel RoutesëŠ” ë…ë¦½ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë° í•  ìˆ˜ ìˆì–´ ê° ê²½ë¡œì— ëŒ€í•´ ë…ë¦½ì ì¸ ì˜¤ë¥˜ ë° ë¡œë”© ìƒíƒœë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fparallel-routes-cinematic-universe.png&w=1920&q=75)
ìœ„ ì˜ˆì œ ì´ë¯¸ì§€ì²˜ëŸ¼ ë‘ ê°œì˜ ë³‘ë ¬ ë¼ìš°íŒ… ì‹œ í•œ ìª½ë§Œ ë¡œë”©ì´ ê¸¸ì–´ì§€ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•  ë•Œ í˜ì´ì§€ ì „ì²´ê°€ ì•„ë‹Œ ì¼ë¶€ë§Œ ìƒíƒœë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

</br>

---

# âœ¨ Intercepting Routes

Intercepting Routesë¥¼ ì´ìš©í•˜ë©´ í˜„ì¬ ë ˆì´ì•„ì›ƒ ë‚´ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œ ê²½ë¡œë¥¼ ë¡œë“œí•  ìˆ˜ ìˆë‹¤. ì´ ë¼ìš°íŒ… íŒ¨ëŸ¬ë‹¤ì„ì€ ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ì»¨í…ìŠ¤íŠ¸ë¡œ ì „í™˜í•˜ì§€ ì•Šê³ ë„ ë¼ìš°íŠ¸ì˜ ì½˜í…ì¸ ë¥¼ í‘œì‹œí•˜ëŠ” ê²½ìš°ì— ìœ ìš©í•œë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fintercepting-routes-soft-navigate.png&w=1920&q=75)
ìœ„ ì´ë¯¸ì§€ì™€ ê°™ì´ í”¼ë“œì—ì„œ ì‚¬ì§„ì„ í´ë¦­í–ˆì„ ë•Œ ì‚¬ì§„ì„ í”¼ë“œ ìœ„ì— ëª¨ë‹¬ë¡œ ì˜¤ë²„ë ˆì´í•˜ì—¬ í‘œì‹œí•  ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°, NextJSëŠ” `/photo/123` ë¼ìš°íŠ¸ë¥¼ ê°€ë¡œì±„ê³  URLì„ ë§ˆìŠ¤í‚¹í•˜ì—¬ `/feed` ìœ„ì— ì˜¤ë²„ë ˆì´í•œë‹¤.

> ì´ë²ˆ ì£¼ ë‚´ë‚´ NextJSë¡œ ëª¨ë‹¬ì´ë‘ í˜ì´ì§€ ì´ë™í•˜ëŠ” ê±° ê°œë°œí–ˆëŠ”ë°... ì¡°ê¸ˆë§Œ ë¹¨ë¦¬ ê³µë¶€í–ˆìœ¼ë©´ ë” ì¢‹ì€ ë°©ì‹ìœ¼ë¡œ ê°œë°œí•  ìˆ˜ ìˆì—ˆì„ ê²ƒ ê°™ì•„ì„œ ë„ˆë¬´ ì•„ì‰½ë‹¤!!!

</br>

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fintercepting-routes-hard-navigate.png&w=1920&q=75)
ê·¸ëŸ¬ë‚˜ ìœ„ì™€ ê°™ì´ ê³µìœ  ê°€ëŠ¥í•œ URLì„ í´ë¦­í•˜ê±°ë‚˜ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹¨í•˜ì—¬ ì‚¬ì§„ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ì—ëŠ” ì „ì²´ ì‚¬ì§„ í˜ì´ì§€ê°€ ëª¨ë‹¬ ëŒ€ì‹  ë Œë”ë§ ë˜ì–´ì•¼ í•œë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” Intercepting Routeê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

## ğŸ’« Convention

Intercepting routeëŠ” `{..}` ê·œì¹™ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì„¸ê·¸ë¨¼íŠ¸ì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œ ê·œì¹™ `../`ê³¼ ìœ ì‚¬í•˜ë‹¤.

- `(.)`ëŠ” ë™ì¼ ë ˆë²¨ì˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë§¤ì¹­í•©ë‹ˆë‹¤.
- `(..)`ëŠ” í•œ ë ˆë²¨ ìœ„ì˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë§¤ì¹­í•©ë‹ˆë‹¤.
- `(..)(..)`ëŠ” ë‘ ë ˆë²¨ ìœ„ì˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë§¤ì¹­í•©ë‹ˆë‹¤.
- `(...)`ëŠ” ë£¨íŠ¸ app ë””ë ‰í† ë¦¬ì˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë§¤ì¹­í•©ë‹ˆë‹¤.

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fintercepted-routes-files.png&w=1920&q=75)
ìœ„ ì´ë¯¸ì§€ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆì„ ë•Œ, `feed` ì„¸ê·¸ë¨¼íŠ¸ ë‚´ì—ì„œ `photo` ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ê°€ë¡œì±„ë ¤ë©´ `(..)photo` ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

ğŸ‘‰ `/feed` í˜ì´ì§€ì—ì„œ ì‚¬ì§„ ì¸ë„¤ì¼ì„ í´ë¦­í•˜ë©´, `/photo/[id]/page.tsx`ê°€ ì •ì‹ í˜ì´ì§€ ê²½ë¡œì´ê³ , `/feed/(..)photo/[id]/page.tsx`ëŠ” feed ì•ˆì—ì„œ ì¸í„°ì…‰íŠ¸í•œ ëª¨ë‹¬ìš© ë²„ì „ì´ë‹¤.

ğŸ”¥ `(..)` ê·œì¹™ì€ ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, íŒŒì¼ ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•œë‹¤.

## ğŸ’« Examples

### Modal

Intercepting RoutesëŠ” Parallel Routesì™€ í•¨ê²Œ ì‚¬ìš©í•˜ì—¬ ëª¨ë‹¬ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ğŸ‘‰ ëª¨ë‹¬ì„ êµ¬ì¶•í•  ë•Œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

ğŸ‘‰ ëª¨ë‹¬ ì½˜í…ì¸ ë¥¼ URLì„ í†µí•´ ê³µìœ  ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
</br>
ğŸ‘‰ í˜ì´ì§€ê°€ ìƒˆë¡œ ê³ ì³ì§ˆ ë•Œ ëª¨ë‹¬ì„ ë‹«ëŠ” ëŒ€ì‹  ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•˜ì—¬ ëª¨ë‹¬ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
</br>
ğŸ‘‰ ë’¤ë¡œ ê°€ê¸° ì‹œ ëª¨ë‹¬ì„ ë‹«ê³ , ì•ìœ¼ë¡œ ë‹¤ì‹œ ì˜¬ ë•Œ ëª¨ë‹¬ì„ ë‹¤ì‹œ ì—´ ìˆ˜ ìˆë‹¤.

ğŸ”¥ ì• Parallel Routesì—ì„œ ì–¸ê¸‰ëœ ë‚´ìš©ê³¼ ë™ì¼í•¨!!

![](https://nextjs.org/_next/image?url=https%3A%2F%2Fh8DxKfmAPhn8O0p3.public.blob.vercel-storage.com%2Fdocs%2Flight%2Fintercepted-routes-modal-example.png&w=1920&q=75)
ìœ„ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ì„ í†µí•´ ê°¤ëŸ¬ë¦¬ì—ì„œ ì‚¬ì§„ ëª¨ë‹¬ì„ ì—´ê±°ë‚˜ ê³µìœ  ê°€ëŠ¥í•œ URLì—ì„œ ì‚¬ì§„ í˜ì´ì§€ë¡œ ì§ì ‘ ì´ë™í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

`photo` ì„¸ê·¸ë¨¼íŠ¸ì— ëŒ€í•œ ê²½ë¡œë¥¼ `(..)` ë§¤ì²˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´ `@modal`ì€ ìŠ¬ë¡¯ì´ê³  ì„¸ê·¸ë¨¼íŠ¸ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.

ğŸ‘‰ íŒŒì¼ ì‹œìŠ¤í…œ ìƒìœ¼ë¡œëŠ” ë‘ ë ˆë²¨ ìœ„ì— ìˆì§€ë§Œ, ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ ë ˆë²¨ì—ì„œëŠ” í•œ ë ˆë²¨ ìœ„ì— ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

> ì•½ê°„ ë¯¸ë¦¬ìº”ë²„ìŠ¤ í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸° ìƒê°í•˜ë‹ˆê¹Œ ì´í•´ê°€ ì˜ ë˜ëŠ” ê²ƒ ê°™ë‹¤!!
